<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TraderMr.KP | Live Tradefinder</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0d1117; color: #c9d1d9; font-family: sans-serif; }
        .card { background: #161b22; border: 1px solid #30363d; border-radius: 12px; padding: 20px; }
        .input-field { background: #0d1117; border: 1px solid #30363d; color: white; padding: 10px; border-radius: 8px; width: 100%; margin-top: 5px; }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="max-w-6xl mx-auto">
        <h1 class="text-3xl font-bold text-blue-500 text-center mb-6">TraderMr.KP Live Dashboard</h1>

        <div class="card mb-8 p-0 overflow-hidden shadow-2xl" style="height:500px; border: 2px solid #1f6feb;">
            <div id="tradingview_chart" style="height: 100%;"></div>
            <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
            <script type="text/javascript">
            new TradingView.widget({
              "autosize": true,
              "symbol": "NSE:NIFTY",
              "interval": "5",
              "timezone": "Asia/Kolkata",
              "theme": "dark",
              "style": "1",
              "locale": "in",
              "toolbar_bg": "#f1f3f6",
              "enable_publishing": false,
              "withdateranges": true,
              "hide_side_toolbar": false,
              "allow_symbol_change": true,
              "container_id": "tradingview_chart"
            });
            </script>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="card border-t-4 border-blue-600">
                <h3 class="text-blue-400 font-bold mb-4">ðŸ“Š Live PCR & Sentiment</h3>
                <input type="number" id="pOI" placeholder="Put OI" class="input-field mb-2">
                <input type="number" id="cOI" placeholder="Call OI" class="input-field mb-2">
                <button onclick="calcPCR()" class="w-full bg-blue-600 p-2 rounded font-bold hover:bg-blue-700">Calculate PCR</button>
                <div id="pRes" class="mt-3 text-sm hidden p-2 rounded text-center font-bold"></div>
            </div>
            <div class="card border-t-4 border-yellow-500">
                <h3 class="text-yellow-500 font-bold mb-4">ðŸ“‰ EMA 9/21 Calculator</h3>
                <input type="number" id="e9" placeholder="9 EMA" class="input-field mb-2">
                <input type="number" id="e21" placeholder="21 EMA" class="input-field mb-2">
                <button onclick="calcEMA()" class="w-full bg-yellow-600 p-2 rounded font-bold hover:bg-yellow-700 text-black">Check Crossover</button>
                <div id="eRes" class="mt-3 text-sm hidden p-2 rounded text-center text-black font-bold"></div>
            </div>
        </div>
    </div>
    <script>
        function calcPCR() {
            const p = document.getElementById('pOI').value, c = document.getElementById('cOI').value, r = document.getElementById('pRes');
            const v = (p/c).toFixed(2);
            r.className = `mt-3 text-sm p-2 rounded text-center block ${v < 0.7 ? 'bg-green-900 text-green-300' : (v > 1.3 ? 'bg-red-900 text-red-300' : 'bg-gray-700 text-white')}`;
            r.innerText = `PCR: ${v} (${v < 0.7 ? 'Bullish' : (v > 1.3 ? 'Bearish' : 'Neutral')})`;
        }
        function calcEMA() {
            const e9 = document.getElementById('e9').value, e21 = document.getElementById('e21').value, r = document.getElementById('eRes');
            const res = parseFloat(e9) > parseFloat(e21);
            r.className = `mt-3 text-sm p-2 rounded text-center block ${res ? 'bg-green-500' : 'bg-red-500'}`;
            r.innerText = res ? "BULLISH CROSSOVER" : "BEARISH CROSSOVER";
        }
    </script>
</body>
</html>
